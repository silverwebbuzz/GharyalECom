{"version":3,"sources":["webpack:///./src/app/newsletter/newsletter.module.ts","webpack:///./src/app/newsletter/newsletter.page.html","webpack:///./src/app/newsletter/newsletter.page.scss","webpack:///./src/app/newsletter/newsletter.page.ts"],"names":[],"mappings":"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","file":"newsletter-newsletter-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NewsletterPage } from './newsletter.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NewsletterPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [NewsletterPage]\n})\nexport class NewsletterPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar class=\\\"clr\\\" text-center>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button fill=\\\"clear\\\" (click)=\\\"back()\\\">\\n        <ion-icon name=\\\"arrow-back\\\" mode=\\\"ios\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>\\n        Newsletter Subscriptions\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <ion-item lines=\\\"none\\\" class=\\\"header\\\">\\n    Subscription Option\\n  </ion-item>\\n\\n  <ion-item lines=\\\"full\\\">\\n    <ion-checkbox mode=\\\"md\\\" (ionChange)=\\\"toggleCheckbox()\\\" [checked]=\\\"isSubscribe\\\"></ion-checkbox>\\n    <ion-label>\\n      General Subscription\\n    </ion-label>\\n  </ion-item>\\n\\n</ion-content>\\n\\n<ion-footer>\\n  <ion-button expand=\\\"full\\\" size=\\\"large\\\" (click)=\\\"updateUserInformation()\\\">\\n    SAVE\\n  </ion-button>\\n</ion-footer>\\n\"","module.exports = \".header {\\n  --background: #f1f1f1;\\n  font-weight: bold; }\\n\\nion-checkbox {\\n  margin-right: 10px; }\\n\\nion-button {\\n  margin: 0px; }\\n\\nion-card {\\n  margin: 0px;\\n  border-radius: 0px;\\n  box-shadow: 0px 0px 0px 0px;\\n  padding: 10px 16px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zaWx2ZXJ3ZWJidXp6L0RvY3VtZW50cy9NRC9pb25pY1Byb2plY3QvZ2hhcnlhbC1lY29tbWVyY2UtYXBwL3NyYy9hcHAvbmV3c2xldHRlci9uZXdzbGV0dGVyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHFCQUFhO0VBQ2IsaUJBQWlCLEVBQUE7O0FBR3JCO0VBQ0ksa0JBQWtCLEVBQUE7O0FBRXRCO0VBQ0ksV0FBVyxFQUFBOztBQUVmO0VBQ0ksV0FBVztFQUNYLGtCQUFrQjtFQUNsQiwyQkFBMkI7RUFDM0Isa0JBQWtCLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9uZXdzbGV0dGVyL25ld3NsZXR0ZXIucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmhlYWRlcntcbiAgICAtLWJhY2tncm91bmQ6ICNmMWYxZjE7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgLy8tLXBhZGRpbmctc3RhcnQ6IDEwcHg7XG59XG5pb24tY2hlY2tib3h7XG4gICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xufVxuaW9uLWJ1dHRvbntcbiAgICBtYXJnaW46IDBweDtcbn1cbmlvbi1jYXJke1xuICAgIG1hcmdpbjogMHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDBweDtcbiAgICBib3gtc2hhZG93OiAwcHggMHB4IDBweCAwcHg7XG4gICAgcGFkZGluZzogMTBweCAxNnB4O1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { NavController } from '@ionic/angular';\nimport { Constants } from '../interfaces/constants.models';\nimport { UserResponse } from '../interfaces/user-response.models';\nimport { Addresses } from '../interfaces/address.models';\nimport { RestService } from '../api/rest.service';\nimport { MagentoServiceService } from '../api/magento-service.service';\nimport { AuthenticationService } from '../services/authentication.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-newsletter',\n  templateUrl: './newsletter.page.html',\n  styleUrls: ['./newsletter.page.scss'],\n})\nexport class NewsletterPage implements OnInit {\n  UserInfo: any;\n  isSubscribe = false;\n  constructor(private navCtrl: NavController,\n    private rest: RestService,\n    private service: MagentoServiceService,\n    private auth: AuthenticationService,\n    private router:Router) { }\n\n  ngOnInit() {\n    this.UserInfo = JSON.parse(window.localStorage.getItem(Constants.USER_KEY));\n    if(this.UserInfo.extension_attributes.is_subscribed){\n      this.isSubscribe = true;\n    }\n  }\n\n  back(){\n    this.navCtrl.navigateBack(['/tabs/account']);\n  }\n\n  updateUserInformation(){\n    const body = {\n      \"customer\":{\n        \"id\":this.UserInfo.id,\n        \"firstname\": this.UserInfo.firstname,\n        \"lastname\": this.UserInfo.lastname,\n        \"extension_attributes\":{\n          \"is_subscribed\":this.isSubscribe\n        },\n        \"email\": this.UserInfo.email,\n        \"storeId\": 1,\n        \"websiteId\": 1\n      }\n    };\n\n    this.rest.presentLoading();\n      this.auth.getToken().then(token=>{\n        this.service.updateCustomerInformation(body,token).subscribe(res=>{\n          if(res){\n            this.rest.dismissLoading();\n            let userResponse: UserResponse = res;\n            window.localStorage.setItem(Constants.USER_KEY, JSON.stringify(userResponse));\n            if(userResponse.addresses){\n              userResponse.addresses.id = -100;\n              let addresse = new Array<Addresses>();\n              addresse.push(userResponse.addresses);\n              if(userResponse.default_billing){\n                window.localStorage.setItem(Constants.SELECTED_ADDRESS_BILLING, JSON.stringify(userResponse.default_billing));\n              }\n              if(userResponse.default_shipping){\n                window.localStorage.setItem(Constants.SELECTED_ADDRESS_SHIPPING, JSON.stringify(userResponse.default_shipping));\n              }\n              window.localStorage.setItem(Constants.SELECTED_ADDRESS_LIST, JSON.stringify(addresse));\n            }\n            this.rest.presentToastWithOptions('Successfully Update Your Profile.');\n          }else{\n            this.rest.dismissLoading();\n            this.rest.presentToastWithOptions('Something was wrong! Please try again.')\n          }\n        },err=>{\n          console.log('err:',err);\n          if(this.rest.isLoading){\n            this.rest.dismissLoading();\n          }\n          if(err.status == 401){\n            const stateURL = this.router.routerState.snapshot.url;\n            this.router.navigate(['/signin'], { queryParams: { returnUrl: stateURL } });\n            this.rest.presentToastWithOptions(' Please login and try again.')\n          }else{\n            this.rest.presentToastWithOptions(err.error.message)\n          }\n        });\n      })\n  }\n\n  toggleCheckbox(){\n    if(this.isSubscribe){\n      this.isSubscribe = false;\n    }else{\n      this.isSubscribe = true;\n    }\n  }\n\n}\n"],"sourceRoot":""}