/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
import { Component, Input, HostBinding, HostListener, ElementRef, ContentChildren } from '@angular/core';
import { CollapsibleTableRowComponent } from '../collapsible-table-row/collapsible-table-row.component';
import { CollapsibleService } from '../services/collapsible.service';
export class CollapsibleTableComponent {
    /**
     * @param {?} el
     * @param {?} collapsibleService
     */
    constructor(el, collapsibleService) {
        this.el = el;
        this.collapsibleService = collapsibleService;
        // allows navigation between table rows using arrow keys
        this.allowKeyboardNavigation = true;
        this.fixedTableHeight = 'auto';
        this.tabindex = 0;
        this.selectedRows = [];
        // specifies collapsible type. Can be either 'accordion' or 'expandable'
        this.type = 'accordion';
        this.mouseDownHold = false;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * @return {?}
     */
    ngAfterContentInit() {
        // this.updateFixedTableHeight();
        /*
                LOG(`CollapsibleTableComponent::ngOnInit()\n` +
                    `this = {\n` +
                    `bordered = ${this.bordered}\n` +
                    `borderedHorizontally = ${this.borderedHorizontally}\n` +
                    `borderedVertically = ${this.borderedVertically}\n` +
                    `striped = ${this.striped}\n` +
                    `stripedOddColor = ${this.stripedOddColor}\n` +
                    `stripedEvenColor = ${this.stripedEvenColor}\n` +
                    `highlight = ${this.highlight}\n` +
                    `highlightColor = ${this.highlightColor}\n` +
                    `highlightTextColor = ${this.highlightTextColor}\n` +
                    `activeColor = ${this.activeColor}\n` +
                    `activeTextColor = ${this.activeTextColor}\n` +
                    `centered = ${this.centered}\n` +
                    `responsive = ${this.responsive}\n` +
                    `select = ${this.select}\n` +
                    `selectColor = ${this.selectColor}\n` +
                    `selectTextColor = ${this.selectTextColor}\n` +
                    `selectMultipleRows = ${this.selectMultipleRows}\n` +
                    `noTextSelect = ${this.noTextSelect}\n` +
                    `}`);
                    */
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        for (const change in changes) {
            if (changes.hasOwnProperty(change)) {
                if (this.collapsibleTableRows != null) {
                    switch (change) {
                        case 'striped':
                        case 'stripedOddColor':
                        case 'stripedOddTextColor':
                        case 'stripedEvenColor':
                        case 'stripedEvenTextColor':
                            this.updateTable('striped');
                            break;
                        case 'highlight':
                        case 'highlightColor':
                        case 'highlightTextColor':
                            this.updateTable('highlight');
                            break;
                        case 'activeColor':
                        case 'activeTextColor':
                            this.updateTable('active');
                            break;
                        case 'select':
                        case 'selectColor':
                        case 'selectTextColor':
                        case 'selectMultipleRows':
                        case 'allowDeselectingRows':
                            this.updateTable('select');
                            break;
                    }
                }
                // update collapsible table type in CollapsibleService
                if (change === 'type') {
                    this.type = changes["type"].currentValue;
                    this.collapsibleService.setType(this.type);
                }
            }
        }
        this.collapsibleService.setCollapsibleTable(this);
    }
    /**
     * @return {?}
     */
    focus() {
        this.el.nativeElement.focus();
    }
    /**
     * @param {?} index
     * @return {?}
     */
    addSelectedRow(index) {
        switch (true) {
            case this.selectMultipleRows && this.selectedRows.indexOf(index) === -1:
                this.selectedRows.push(index);
                this.selectedRows.sort((a, b) => a - b);
                break;
            case !this.selectMultipleRows:
                this.selectedRows = [];
                this.deselectAllRows();
                this.selectedRows.push(index);
                this.selectedRows.sort((a, b) => a - b);
                break;
        }
    }
    /**
     * @param {?} index
     * @return {?}
     */
    removeSelectedRow(index) {
        if (this.selectedRows.indexOf(index) !== -1) {
            this.selectedRows.splice(this.selectedRows.indexOf(index), 1);
        }
    }
    /**
     * @return {?}
     */
    clearSelectedRows() {
        this.selectedRows = [];
    }
    /**
     * @return {?}
     */
    deselectAllRows() {
        this.collapsibleTableRows.forEach(row => {
            row.selected = false;
            row.updateRow();
        });
    }
    /**
     * @param {?} index
     * @return {?}
     */
    selectRow(index) {
        if (this.select) {
            switch (true) {
                case index === 0:
                    this.selectRow(1);
                    break;
                case index === this.collapsibleTableRows.length:
                    this.selectRow(this.collapsibleTableRows.length - 1);
                    break;
                case 0 < index && index <= this.collapsibleTableRows.length - 1:
                    this.addSelectedRow(index);
                    this.collapsibleTableRows.forEach((row, i) => {
                        if (index !== i) {
                            if (!this.selectMultipleRows) {
                                row.selected = false;
                            }
                        }
                        else {
                            row.selected = true;
                        }
                        row.updateRow();
                    });
                    break;
            }
        }
    }
    /**
     * @param {?} firstRowIndex
     * @param {?} lastRowIndex
     * @return {?}
     */
    selectRows(firstRowIndex, lastRowIndex) {
        if (this.selectMultipleRows &&
            0 < firstRowIndex && firstRowIndex < lastRowIndex &&
            lastRowIndex <= this.collapsibleTableRows.length - 1) {
            this.clearSelectedRows();
            this.collapsibleTableRows.forEach((row, i) => {
                if (firstRowIndex <= i && i <= lastRowIndex) {
                    this.addSelectedRow(i);
                    row.selected = true;
                }
                else {
                    row.selected = false;
                }
                row.updateRow();
            });
        }
    }
    /**
     * @param {?} index
     * @return {?}
     */
    toggleRowSelection(index) {
        if (this.select &&
            0 < index && index <= this.collapsibleTableRows.length - 1) {
            this.collapsibleTableRows.forEach((row, i) => {
                if (index === i) {
                    if (row.selected) {
                        this.removeSelectedRow(index);
                    }
                    else {
                        this.addSelectedRow(index);
                    }
                    row.selected = !row.selected;
                    row.updateRow();
                }
            });
        }
    }
    /**
     * @param {?} row
     * @return {?}
     */
    updateStriped(row) {
        if (this.striped && row.isBodyRow) {
            row.isParentStriped = true;
            if (row.isOddRow) {
                row.parentStripedRowBackgroundColor = this.stripedOddColor || CollapsibleTableRowComponent.DEFAULT_STRIPED_ODD_ROW_COLOR;
                row.parentStripedRowTextColor = this.stripedOddTextColor || CollapsibleTableRowComponent.DEFAULT_ROW_TEXT_COLOR;
                row.rowBackgroundColor = row.parentStripedRowBackgroundColor;
                row.rowTextColor = row.parentStripedRowTextColor;
            }
            else {
                row.parentStripedRowBackgroundColor = this.stripedEvenColor || CollapsibleTableRowComponent.DEFAULT_STRIPED_EVEN_ROW_COLOR;
                row.parentStripedRowTextColor = this.stripedEvenTextColor || CollapsibleTableRowComponent.DEFAULT_ROW_TEXT_COLOR;
                row.rowBackgroundColor = row.parentStripedRowBackgroundColor;
                row.rowTextColor = row.parentStripedRowTextColor;
            }
        }
        else {
            row.isParentStriped = false;
            row.rowBackgroundColor = undefined;
            row.rowTextColor = undefined;
        }
    }
    /**
     * @param {?} row
     * @return {?}
     */
    updateHighlight(row) {
        row.isParentHighlight = this.highlight;
        row.parentHighlightRowBackgroundColor = this.highlightColor || CollapsibleTableRowComponent.DEFAULT_HIGHLIGHT_ROW_COLOR;
        row.parentHighlightRowTextColor = this.highlightTextColor || CollapsibleTableRowComponent.DEFAULT_ROW_TEXT_COLOR;
    }
    /**
     * @param {?} row
     * @return {?}
     */
    updateActive(row) {
        row.activeRowBackgroundColor = this.activeColor || CollapsibleTableRowComponent.DEFAULT_ACTIVE_ROW_COLOR;
        row.activeRowTextColor = this.activeTextColor || CollapsibleTableRowComponent.DEFAULT_ROW_TEXT_COLOR;
    }
    /**
     * @param {?} row
     * @return {?}
     */
    updateSelect(row) {
        row.parentAllowsSelect = this.select;
        row.parentAllowsSelectMultipleRows = this.selectMultipleRows;
        row.parentAllowsDeselectingRows = this.allowDeselectingRows;
        if (row.selected) {
            row.selectedRowBackgroundColor = this.selectColor || CollapsibleTableRowComponent.DEFAULT_SELECTED_ROW_COLOR;
            row.selectedRowTextColor = this.selectTextColor || CollapsibleTableRowComponent.DEFAULT_ROW_TEXT_COLOR;
            row.rowBackgroundColor = row.selectedRowBackgroundColor;
            row.rowTextColor = row.selectedRowTextColor;
        }
    }
    /**
     * @param {?=} change
     * @return {?}
     */
    updateTable(change) {
        if (this.collapsibleTableRows != null) {
            if (change != null) {
                switch (change) {
                    case 'striped':
                        // propagate changes to each of the CollapsibleTableRowComponent children
                        this.collapsibleTableRows.forEach(row => { this.updateStriped(row); });
                        break;
                    case 'highlight':
                        this.collapsibleTableRows.forEach(row => { this.updateHighlight(row); });
                        break;
                    case 'active':
                        this.collapsibleTableRows.forEach(row => { this.updateActive(row); });
                        break;
                    case 'select':
                        this.collapsibleTableRows.forEach(row => { this.updateSelect(row); });
                        break;
                }
            }
            else {
                // propagate changes to each of the CollapsibleTableRowComponent children
                this.collapsibleTableRows.forEach(row => {
                    this.updateStriped(row);
                    this.updateHighlight(row);
                    this.updateSelect(row);
                    this.updateActive(row);
                });
            }
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    keydown(event) {
        // select a row only if 'select' property is set to 'true'
        if (this.select && this.allowKeyboardNavigation) {
            /** @enum {number} */
            const Key = {
                arrowUp: 38,
                arrowDown: 40,
                home: 36,
                end: 35,
            };
            Key[Key.arrowUp] = 'arrowUp';
            Key[Key.arrowDown] = 'arrowDown';
            Key[Key.home] = 'home';
            Key[Key.end] = 'end';
            /** @type {?} */
            let index = 1;
            /** @type {?} */
            const whichKey = event['which'];
            if (Key[whichKey] != null) {
                event.preventDefault();
                event.stopPropagation();
                switch (whichKey) {
                    case Key.arrowUp:
                        // select previous row
                        if (this.selectedRows.length > 0) {
                            index = this.selectedRows[this.selectedRows.length - 1];
                            index--;
                        }
                        break;
                    case Key.arrowDown:
                        // select next row
                        if (this.selectedRows.length > 0) {
                            index = this.selectedRows[this.selectedRows.length - 1];
                            index++;
                        }
                        break;
                    case Key.home:
                        index = 1;
                        break;
                    case Key.end:
                        index = this.collapsibleTableRows.length - 1;
                        break;
                }
                this.clearSelectedRows();
                this.deselectAllRows();
                this.selectRow(index);
                this.updateTable();
            }
        }
    }
    /**
     * @return {?}
     */
    mousedown() {
        this.mouseDownHold = true;
    }
    /**
     * @return {?}
     */
    mouseup() {
        this.mouseDownHold = false;
    }
}
CollapsibleTableComponent.decorators = [
    { type: Component, args: [{
                selector: 'collapsible-table',
                template: `<ng-content></ng-content>`,
                providers: [
                    CollapsibleService
                ],
                styles: [`
        :host {
            display: table;
            position: relative;
            width: 100%;
            border-collapse: collapse;
        }

        :host thead {
            border-bottom: 1px solid #d0d0d0;
        }

        :host /deep/ tbody /deep/ collapsible-table-row {
            cursor: pointer;
        }

        :host /deep/ collapsible-table-row th,
        :host /deep/ collapsible-table-row td {
            border-radius: 0;
        }

        :host[bordered='true'] {
            border-top: 1px solid #d0d0d0;
            border-right: 1px solid #d0d0d0;
            border-left: 1px solid #d0d0d0;
        }

        :host[bordered='true'] /deep/ collapsible-table-row,
        :host[borderedHorizontally='true'] /deep/ collapsible-table-row {
            border-bottom: 1px solid #d0d0d0;
        }

        :host[bordered='true'] /deep/ collapsible-table-row th,
        :host[bordered='true'] /deep/ collapsible-table-row td,
        :host[borderedVertically='true'] /deep/ collapsible-table-row th:not(:last-child),
        :host[borderedVertically='true'] /deep/ collapsible-table-row td:not(:last-child) {
            border-right: 1px solid #d0d0d0;
        }

        :host(.centered) /deep/ * {
            text-align: center;
        }

        :host(.noTextSelect) /deep/ collapsible-table-row th,
        :host(.noTextSelect) /deep/ collapsible-table-row td {
            user-select: none;
        }
    `]
            }] }
];
/** @nocollapse */
CollapsibleTableComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: CollapsibleService }
];
CollapsibleTableComponent.propDecorators = {
    bordered: [{ type: Input }, { type: HostBinding, args: ['attr.bordered',] }],
    borderedHorizontally: [{ type: Input }, { type: HostBinding, args: ['attr.borderedHorizontally',] }],
    borderedVertically: [{ type: Input }, { type: HostBinding, args: ['attr.borderedVertically',] }],
    striped: [{ type: Input }, { type: HostBinding, args: ['attr.striped',] }],
    stripedOddColor: [{ type: Input }, { type: HostBinding, args: ['attr.stripedOddColor',] }],
    stripedOddTextColor: [{ type: Input }, { type: HostBinding, args: ['attr.stripedOddTextColor',] }],
    stripedEvenColor: [{ type: Input }, { type: HostBinding, args: ['attr.stripedEvenColor',] }],
    stripedEvenTextColor: [{ type: Input }, { type: HostBinding, args: ['attr.stripedEvenTextColor',] }],
    highlight: [{ type: Input }, { type: HostBinding, args: ['attr.highlight',] }],
    highlightColor: [{ type: Input }, { type: HostBinding, args: ['attr.highlightColor',] }],
    highlightTextColor: [{ type: Input }, { type: HostBinding, args: ['attr.highlightTextColor',] }],
    activeColor: [{ type: Input }, { type: HostBinding, args: ['attr.activeColor',] }],
    activeTextColor: [{ type: Input }, { type: HostBinding, args: ['attr.activeTextColor',] }],
    centered: [{ type: Input }, { type: HostBinding, args: ['class.centered',] }, { type: HostBinding, args: ['attr.centered',] }],
    responsive: [{ type: Input }, { type: HostBinding, args: ['attr.responsive',] }],
    select: [{ type: Input }, { type: HostBinding, args: ['attr.select',] }],
    selectMultipleRows: [{ type: Input }, { type: HostBinding, args: ['attr.selectMultipleRows',] }],
    selectColor: [{ type: Input }, { type: HostBinding, args: ['attr.selectColor',] }],
    selectTextColor: [{ type: Input }, { type: HostBinding, args: ['attr.selectTextColor',] }],
    allowDeselectingRows: [{ type: Input }, { type: HostBinding, args: ['attr.allowDeselectingRows',] }],
    allowKeyboardNavigation: [{ type: Input }, { type: HostBinding, args: ['attr.allowKeyboardNavigation',] }],
    noTextSelect: [{ type: Input }, { type: HostBinding, args: ['class.noTextSelect',] }, { type: HostBinding, args: ['attr.noTextSelect',] }],
    tabindex: [{ type: HostBinding, args: ['attr.tabindex',] }],
    type: [{ type: Input }, { type: HostBinding, args: ['attr.type',] }],
    collapsibleTableRows: [{ type: ContentChildren, args: [CollapsibleTableRowComponent,] }],
    keydown: [{ type: HostListener, args: ['keydown', ['$event'],] }],
    mousedown: [{ type: HostListener, args: ['mousedown',] }],
    mouseup: [{ type: HostListener, args: ['mouseup',] }]
};
if (false) {
    /** @type {?} */
    CollapsibleTableComponent.prototype.bordered;
    /** @type {?} */
    CollapsibleTableComponent.prototype.borderedHorizontally;
    /** @type {?} */
    CollapsibleTableComponent.prototype.borderedVertically;
    /** @type {?} */
    CollapsibleTableComponent.prototype.striped;
    /** @type {?} */
    CollapsibleTableComponent.prototype.stripedOddColor;
    /** @type {?} */
    CollapsibleTableComponent.prototype.stripedOddTextColor;
    /** @type {?} */
    CollapsibleTableComponent.prototype.stripedEvenColor;
    /** @type {?} */
    CollapsibleTableComponent.prototype.stripedEvenTextColor;
    /** @type {?} */
    CollapsibleTableComponent.prototype.highlight;
    /** @type {?} */
    CollapsibleTableComponent.prototype.highlightColor;
    /** @type {?} */
    CollapsibleTableComponent.prototype.highlightTextColor;
    /** @type {?} */
    CollapsibleTableComponent.prototype.activeColor;
    /** @type {?} */
    CollapsibleTableComponent.prototype.activeTextColor;
    /** @type {?} */
    CollapsibleTableComponent.prototype.centered;
    /** @type {?} */
    CollapsibleTableComponent.prototype.responsive;
    /** @type {?} */
    CollapsibleTableComponent.prototype.select;
    /** @type {?} */
    CollapsibleTableComponent.prototype.selectMultipleRows;
    /** @type {?} */
    CollapsibleTableComponent.prototype.selectColor;
    /** @type {?} */
    CollapsibleTableComponent.prototype.selectTextColor;
    /** @type {?} */
    CollapsibleTableComponent.prototype.allowDeselectingRows;
    /** @type {?} */
    CollapsibleTableComponent.prototype.allowKeyboardNavigation;
    /** @type {?} */
    CollapsibleTableComponent.prototype.noTextSelect;
    /** @type {?} */
    CollapsibleTableComponent.prototype.fixedTableHeight;
    /** @type {?} */
    CollapsibleTableComponent.prototype.tabindex;
    /** @type {?} */
    CollapsibleTableComponent.prototype.selectedRows;
    /** @type {?} */
    CollapsibleTableComponent.prototype.type;
    /** @type {?} */
    CollapsibleTableComponent.prototype.collapsibleTableRows;
    /** @type {?} */
    CollapsibleTableComponent.prototype.mouseDownHold;
    /** @type {?} */
    CollapsibleTableComponent.prototype.el;
    /** @type {?} */
    CollapsibleTableComponent.prototype.collapsibleService;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sbGFwc2libGUtdGFibGUuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vYW5ndWxhcjItY29sbGFwc2libGUvIiwic291cmNlcyI6WyJsaWIvY29sbGFwc2libGUtdGFibGUvY29sbGFwc2libGUtdGFibGUuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQ0gsU0FBUyxFQUVULEtBQUssRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUNoQyxVQUFVLEVBQUUsZUFBZSxFQUM5QixNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUUsNEJBQTRCLEVBQUUsTUFBTSwwREFBMEQsQ0FBQztBQUN4RyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQXlEckUsTUFBTTs7Ozs7SUE0R0YsWUFDWSxJQUNBO1FBREEsT0FBRSxHQUFGLEVBQUU7UUFDRix1QkFBa0IsR0FBbEIsa0JBQWtCOzt1Q0F2QkosSUFBSTtnQ0FPWCxNQUFNO3dCQUVnQixDQUFDOzRCQUVaLEVBQUU7O29CQUk2QixXQUFXOzZCQUl4RCxLQUFLO0tBSWtDOzs7O0lBRXZELFFBQVE7S0FDUDs7OztJQUVELGtCQUFrQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztLQXlCakI7Ozs7O0lBRUQsV0FBVyxDQUFDLE9BQXNCO1FBQzlCLEtBQUssTUFBTSxNQUFNLElBQUksT0FBTyxFQUFFO1lBQzFCLElBQUksT0FBTyxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsRUFBRTtnQkFDaEMsSUFBSSxJQUFJLENBQUMsb0JBQW9CLElBQUksSUFBSSxFQUFFO29CQUNuQyxRQUFRLE1BQU0sRUFBRTt3QkFDWixLQUFLLFNBQVMsQ0FBQzt3QkFDZixLQUFLLGlCQUFpQixDQUFDO3dCQUN2QixLQUFLLHFCQUFxQixDQUFDO3dCQUMzQixLQUFLLGtCQUFrQixDQUFDO3dCQUN4QixLQUFLLHNCQUFzQjs0QkFDdkIsSUFBSSxDQUFDLFdBQVcsQ0FB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OzJCQUkxQyxLQUFLLFlBQ0wsV0FBVyxTQUFDLG9CQUFvQixjQUNoQyxXQUFXLFNBQUMsbUJBQW1CO3VCQUkvQixXQUFXLFNBQUMsZUFBZTttQkFLM0IsS0FBSyxZQUNMLFdBQVcsU0FBQyxXQUFXO21DQUV2QixlQUFlLFNBQUMsNEJBQTRCO3NCQW9RNUMsWUFBWSxTQUFDLFNBQVMsRUFBRSxDQUFDLFFBQVEsQ0FBQzt3QkFpRGxDLFlBQVksU0FBQyxXQUFXO3NCQUt4QixZQUFZLFNBQUMsU0FBUyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgQ29tcG9uZW50LFxuICAgIE9uSW5pdCwgT25DaGFuZ2VzLCBTaW1wbGVDaGFuZ2VzLCBBZnRlckNvbnRlbnRJbml0LFxuICAgIElucHV0LCBIb3N0QmluZGluZywgSG9zdExpc3RlbmVyLFxuICAgIEVsZW1lbnRSZWYsIENvbnRlbnRDaGlsZHJlblxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgQ29sbGFwc2libGVUYWJsZVJvd0NvbXBvbmVudCB9IGZyb20gJy4uL2NvbGxhcHNpYmxlLXRhYmxlLXJvdy9jb2xsYXBzaWJsZS10YWJsZS1yb3cuY29tcG9uZW50JztcbmltcG9ydCB7IENvbGxhcHNpYmxlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2NvbGxhcHNpYmxlLnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2NvbGxhcHNpYmxlLXRhYmxlJyxcbiAgICB0ZW1wbGF0ZTogYDxuZy1jb250ZW50PjwvbmctY29udGVudD5gLFxuICAgIHN0eWxlczogW2BcbiAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgZGlzcGxheTogdGFibGU7XG4gICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XG4gICAgICAgIH1cblxuICAgICAgICA6aG9zdCB0aGVhZCB7XG4gICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2QwZDBkMDtcbiAgICAgICAgfVxuXG4gICAgICAgIDpob3N0IC9kZWVwLyB0Ym9keSAvZGVlcC8gY29sbGFwc2libGUtdGFibGUtcm93IHtcbiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIDpob3N0IC9kZWVwLyBjb2xsYXBzaWJsZS10YWJsZS1yb3cgdGgsXG4gICAgICAgIDpob3N0IC9kZWVwLyBjb2xsYXBzaWJsZS10YWJsZS1yb3cgdGQge1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcbiAgICAgICAgfVxuXG4gICAgICAgIDpob3N0W2JvcmRlcmVkPSd0cnVlJ10ge1xuICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNkMGQwZDA7XG4gICAgICAgICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjZDBkMGQwO1xuICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjZDBkMGQwO1xuICAgICAgICB9XG5cbiAgICAgICAgOmhvc3RbYm9yZGVyZWQ9J3RydWUnXSAvZGVlcC8gY29sbGFwc2libGUtdGFibGUtcm93LFxuICAgICAgICA6aG9zdFtib3JkZXJlZEhvcml6b250YWxseT0ndHJ1ZSddIC9kZWVwLyBjb2xsYXBzaWJsZS10YWJsZS1yb3cge1xuICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkMGQwZDA7XG4gICAgICAgIH1cblxuICAgICAgICA6aG9zdFtib3JkZXJlZD0ndHJ1ZSddIC9kZWVwLyBjb2xsYXBzaWJsZS10YWJsZS1yb3cgdGgsXG4gICAgICAgIDpob3N0W2JvcmRlcmVkPSd0cnVlJ10gL2RlZXAvIGNvbGxhcHNpYmxlLXRhYmxlLXJvdyB0ZCxcbiAgICAgICAgOmhvc3RbYm9yZGVyZWRWZXJ0aWNhbGx5PSd0cnVlJ10gL2RlZXAvIGNvbGxhcHNpYmxlLXRhYmxlLXJvdyB0aDpub3QoOmxhc3QtY2hpbGQpLFxuICAgICAgICA6aG9zdFtib3JkZXJlZFZlcnRpY2FsbHk9J3RydWUnXSAvZGVlcC8gY29sbGFwc2libGUtdGFibGUtcm93IHRkOm5vdCg6bGFzdC1jaGlsZCkge1xuICAgICAgICAgICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2QwZDBkMDtcbiAgICAgICAgfVxuXG4gICAgICAgIDpob3N0KC5jZW50ZXJlZCkgL2RlZXAvICoge1xuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgOmhvc3QoLm5vVGV4dFNlbGVjdCkgL2RlZXAvIGNvbGxhcHNpYmxlLXRhYmxlLXJvdyB0aCxcbiAgICAgICAgOmhvc3QoLm5vVGV4dFNlbGVjdCkgL2RlZXAvIGNvbGxhcHNpYmxlLXRhYmxlLXJvdyB0ZCB7XG4gICAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgfVxuICAgIGBdLFxuICAgIHByb3ZpZGVyczogW1xuICAgICAgICBDb2xsYXBzaWJsZVNlcnZpY2VcbiAgICBdXG59KVxuZXhwb3J0IGNsYXNzIENvbGxhcHNpYmxlVGFibGVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcywgQWZ0ZXJDb250ZW50SW5pdCB7XG4gICAgLy8gY29tcG9uZW50IG9wdGlvbnNcbiAgICAvL1xuICAgIC8vIG1ha2VzIHRoZSB0YWJsZSBib3JkZXJlZFxuICAgIEBJbnB1dCgpXG4gICAgQEhvc3RCaW5kaW5nKCdhdHRyLmJvcmRlcmVkJykgYm9yZGVyZWQ6IGJvb2xlYW47XG5cbiAgICAvLyBtYWtlcyB0aGUgdGFibGUgYm9yZGVyZWQgaG9yaXpvbnRhbGx5IG9ubHlcbiAgICBASW5wdXQoKVxuICAgIEBIb3N0QmluZGluZygnYXR0ci5ib3JkZXJlZEhvcml6b250YWxseScpIGJvcmRlcmVkSG9yaXpvbnRhbGx5OiBib29sZWFuO1xuXG4gICAgLy8gbWFrZXMgdGhlIHRhYmxlIGJvcmRlcmVkIHZlcnRpY2FsbHkgb25seVxuICAgIEBJbnB1dCgpXG4gICAgQEhvc3RCaW5kaW5nKCdhdHRyLmJvcmRlcmVkVmVydGljYWxseScpIGJvcmRlcmVkVmVydGljYWxseTogYm9vbGVhbjtcblxuICAgIC8vIG1ha2VzIHRoZSB0YWJsZSBzdHJpcGVkXG4gICAgQElucHV0KClcbiAgICBASG9zdEJpbmRpbmcoJ2F0dHIuc3RyaXBlZCcpIHN0cmlwZWQ6IGJvb2xlYW47XG5cbiAgICAvLyBhIGNvbG9yIG9mIGFuIG9kZCBzdHJpcGVkIHJvd1xuICAgIEBJbnB1dCgpXG4gICAgQEhvc3RCaW5kaW5nKCdhdHRyLnN0cmlwZWRPZGRDb2xvcicpIHN0cmlwZWRPZGRDb2xvcjogc3RyaW5nO1xuXG4gICAgLy8gYSB0ZXh0IGNvbG9yIG9mIGFuIG9kZCBzdHJpcGVkIHJvd1xuICAgIEBJbnB1dCgpXG4gICAgQEhvc3RCaW5kaW5nKCdhdHRyLnN0cmlwZWRPZGRUZXh0Q29sb3InKSBzdHJpcGVkT2RkVGV4dENvbG9yOiBzdHJpbmc7XG5cbiAgICAvLyBhIGNvbG9yIG9mIGFuIGV2ZW4gc3RyaXBlZCByb3dcbiAgICBASW5wdXQoKVxuICAgIEBIb3N0QmluZGluZygnYXR0ci5zdHJpcGVkRXZlbkNvbG9yJykgc3RyaXBlZEV2ZW5Db2xvcjogc3RyaW5nO1xuXG4gICAgLy8gYSB0ZXh0IGNvbG9yIG9mIGFuIGV2ZW4gc3RyaXBlZCByb3dcbiAgICBASW5wdXQoKVxuICAgIEBIb3N0QmluZGluZygnYXR0ci5zdHJpcGVkRXZlblRleHRDb2xvcicpIHN0cmlwZWRFdmVuVGV4dENvbG9yOiBzdHJpbmc7XG5cbiAgICAvLyBoaWdobGlnaHQgdGFibGUgcm93cyBvbiBtb3VzZSBob3ZlclxuICAgIEBJbnB1dCgpXG4gICAgQEhvc3RCaW5kaW5nKCdhdHRyLmhpZ2hsaWdodCcpIGhpZ2hsaWdodDogYm9vbGVhbjtcblxuICAgIC8vIGEgY29sb3Igb2YgYSBoaWdobGlnaHRlZCByb3dcbiAgICBASW5wdXQoKVxuICAgIEBIb3N0QmluZGluZygnYXR0ci5oaWdobGlnaHRDb2xvcicpIGhpZ2hsaWdodENvbG9yOiBzdHJpbmc7XG5cbiAgICAvLyBhIHRleHQgY29sb3Igb2YgYSBoaWdobGlnaHRlZCByb3dcbiAgICBASW5wdXQoKVxuICAgIEBIb3N0QmluZGluZygnYXR0ci5oaWdobGlnaHRUZXh0Q29sb3InKSBoaWdobGlnaHRUZXh0Q29sb3I6IHN0cmluZztcblxuICAgIC8vIGEgY29sb3Igb2YgYW4gYWN0aXZlIHJvd1xuICAgIEBJbnB1dCgpXG4gICAgQEhvc3RCaW5kaW5nKCdhdHRyLmFjdGl2ZUNvbG9yJykgYWN0aXZlQ29sb3I6IHN0cmluZztcblxuICAgIC8vIGEgdGV4dCBjb2xvciBvZiBhbiBhY3RpdmUgcm93XG4gICAgQElucHV0KClcbiAgICBASG9zdEJpbmRpbmcoJ2F0dHIuYWN0aXZlVGV4dENvbG9yJykgYWN0aXZlVGV4dENvbG9yOiBzdHJpbmc7XG5cbiAgICAvLyBjZW50ZXIgYWxpZ24gYWxsIHRoZSB0ZXh0IGluIHRoZSB0YWJsZVxuICAgIEBJbnB1dCgpXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5jZW50ZXJlZCcpXG4gICAgQEhvc3RCaW5kaW5nKCdhdHRyLmNlbnRlcmVkJykgY2VudGVyZWQ6IGJvb2xlYW47XG5cbiAgICAvLyBtYWtlcyB0aGUgdGFibGUgaG9yaXpvbnRhbGx5IHNjcm9sbGFibGUgb24gc21hbGxlciBzY3JlZW4gd2lkdGhzXG4gICAgQElucHV0KClcbiAgICBASG9zdEJpbmRpbmcoJ2F0dHIucmVzcG9uc2l2ZScpIHJlc3BvbnNpdmU6IGJvb2xlYW47XG5cbiAgICAvLyBhbGxvd3MgdG8gc2VsZWN0IHJvd3NcbiAgICBASW5wdXQoKVxuICAgIEBIb3N0QmluZGluZygnYXR0ci5zZWxlY3QnKSBzZWxlY3Q6IGJvb2xlYW47XG5cbiAgICAvLyBhbGxvd3MgdG8gc2VsZWN0IG11bHRpcGxlIHJvd3NcbiAgICBASW5wdXQoKVxuICAgIEBIb3N0QmluZGluZygnYXR0ci5zZWxlY3RNdWx0aXBsZVJvd3MnKSBzZWxlY3RNdWx0aXBsZVJvd3M6IGJvb2xlYW47XG5cbiAgICAvLyBhIGNvbG9yIG9mIGEgc2VsZWN0ZWQgcm93XG4gICAgQElucHV0KClcbiAgICBASG9zdEJpbmRpbmcoJ2F0dHIuc2VsZWN0Q29sb3InKSBzZWxlY3RDb2xvcjogc3RyaW5nO1xuXG4gICAgLy8gYSB0ZXh0IGNvbG9yIG9mIGEgc2VsZWN0ZWQgcm93XG4gICAgQElucHV0KClcbiAgICBASG9zdEJpbmRpbmcoJ2F0dHIuc2VsZWN0VGV4dENvbG9yJykgc2VsZWN0VGV4dENvbG9yOiBzdHJpbmc7XG5cbiAgICAvLyBhbGxvd3MgZGVzZWxlY3Rpbmcgc2VsZWN0ZWQgcm93c1xuICAgIEBJbnB1dCgpXG4gICAgQEhvc3RCaW5kaW5nKCdhdHRyLmFsbG93RGVzZWxlY3RpbmdSb3dzJykgYWxsb3dEZXNlbGVjdGluZ1Jvd3M6IGJvb2xlYW47XG5cbiAgICAvLyBhbGxvd3MgbmF2aWdhdGlvbiBiZXR3ZWVuIHRhYmxlIHJvd3MgdXNpbmcgYXJyb3cga2V5c1xuICAgIEBJbnB1dCgpXG4gICAgQEhvc3RCaW5kaW5nKCdhdHRyLmFsbG93S2V5Ym9hcmROYXZpZ2F0aW9uJylcbiAgICBhbGxvd0tleWJvYXJkTmF2aWdhdGlvbiA9IHRydWU7XG5cbiAgICAvLyBkaXNhYmxlcyB1c2VyIHNlbGVjdCB3aXRoaW5nIHRoZSB0YWJsZVxuICAgIEBJbnB1dCgpXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5ub1RleHRTZWxlY3QnKVxuICAgIEBIb3N0QmluZGluZygnYXR0ci5ub1RleHRTZWxlY3QnKSBub1RleHRTZWxlY3Q6IGJvb2xlYW47XG5cbiAgICBmaXhlZFRhYmxlSGVpZ2h0ID0gJ2F1dG8nO1xuXG4gICAgQEhvc3RCaW5kaW5nKCdhdHRyLnRhYmluZGV4JykgdGFiaW5kZXggPSAwO1xuXG4gICAgc2VsZWN0ZWRSb3dzOiBBcnJheTxudW1iZXI+ID0gW107XG5cbiAgICAvLyBzcGVjaWZpZXMgY29sbGFwc2libGUgdHlwZS4gQ2FuIGJlIGVpdGhlciAnYWNjb3JkaW9uJyBvciAnZXhwYW5kYWJsZSdcbiAgICBASW5wdXQoKVxuICAgIEBIb3N0QmluZGluZygnYXR0ci50eXBlJykgdHlwZTogJ2FjY29yZGlvbicgfCAnZXhwYW5kYWJsZScgPSAnYWNjb3JkaW9uJztcblxuICAgIEBDb250ZW50Q2hpbGRyZW4oQ29sbGFwc2libGVUYWJsZVJvd0NvbXBvbmVudCkgY29sbGFwc2libGVUYWJsZVJvd3M6IEFycmF5PENvbGxhcHNpYmxlVGFibGVSb3dDb21wb25lbnQ+O1xuXG4gICAgbW91c2VEb3duSG9sZCA9IGZhbHNlO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgZWw6IEVsZW1lbnRSZWYsXG4gICAgICAgIHByaXZhdGUgY29sbGFwc2libGVTZXJ2aWNlOiBDb2xsYXBzaWJsZVNlcnZpY2UpIHsgfVxuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgfVxuXG4gICAgbmdBZnRlckNvbnRlbnRJbml0KCkge1xuICAgICAgICAvLyB0aGlzLnVwZGF0ZUZpeGVkVGFibGVIZWlnaHQoKTtcbiAgICAgICAgLypcbiAgICAgICAgTE9HKGBDb2xsYXBzaWJsZVRhYmxlQ29tcG9uZW50OjpuZ09uSW5pdCgpXFxuYCArXG4gICAgICAgICAgICBgdGhpcyA9IHtcXG5gICtcbiAgICAgICAgICAgIGBib3JkZXJlZCA9ICR7dGhpcy5ib3JkZXJlZH1cXG5gICtcbiAgICAgICAgICAgIGBib3JkZXJlZEhvcml6b250YWxseSA9ICR7dGhpcy5ib3JkZXJlZEhvcml6b250YWxseX1cXG5gICtcbiAgICAgICAgICAgIGBib3JkZXJlZFZlcnRpY2FsbHkgPSAke3RoaXMuYm9yZGVyZWRWZXJ0aWNhbGx5fVxcbmAgK1xuICAgICAgICAgICAgYHN0cmlwZWQgPSAke3RoaXMuc3RyaXBlZH1cXG5gICtcbiAgICAgICAgICAgIGBzdHJpcGVkT2RkQ29sb3IgPSAke3RoaXMuc3RyaXBlZE9kZENvbG9yfVxcbmAgK1xuICAgICAgICAgICAgYHN0cmlwZWRFdmVuQ29sb3IgPSAke3RoaXMuc3RyaXBlZEV2ZW5Db2xvcn1cXG5gICtcbiAgICAgICAgICAgIGBoaWdobGlnaHQgPSAke3RoaXMuaGlnaGxpZ2h0fVxcbmAgK1xuICAgICAgICAgICAgYGhpZ2hsaWdodENvbG9yID0gJHt0aGlzLmhpZ2hsaWdodENvbG9yfVxcbmAgK1xuICAgICAgICAgICAgYGhpZ2hsaWdodFRleHRDb2xvciA9ICR7dGhpcy5oaWdobGlnaHRUZXh0Q29sb3J9XFxuYCArXG4gICAgICAgICAgICBgYWN0aXZlQ29sb3IgPSAke3RoaXMuYWN0aXZlQ29sb3J9XFxuYCArXG4gICAgICAgICAgICBgYWN0aXZlVGV4dENvbG9yID0gJHt0aGlzLmFjdGl2ZVRleHRDb2xvcn1cXG5gICtcbiAgICAgICAgICAgIGBjZW50ZXJlZCA9ICR7dGhpcy5jZW50ZXJlZH1cXG5gICtcbiAgICAgICAgICAgIGByZXNwb25zaXZlID0gJHt0aGlzLnJlc3BvbnNpdmV9XFxuYCArXG4gICAgICAgICAgICBgc2VsZWN0ID0gJHt0aGlzLnNlbGVjdH1cXG5gICtcbiAgICAgICAgICAgIGBzZWxlY3RDb2xvciA9ICR7dGhpcy5zZWxlY3RDb2xvcn1cXG5gICtcbiAgICAgICAgICAgIGBzZWxlY3RUZXh0Q29sb3IgPSAke3RoaXMuc2VsZWN0VGV4dENvbG9yfVxcbmAgK1xuICAgICAgICAgICAgYHNlbGVjdE11bHRpcGxlUm93cyA9ICR7dGhpcy5zZWxlY3RNdWx0aXBsZVJvd3N9XFxuYCArXG4gICAgICAgICAgICBgbm9UZXh0U2VsZWN0ID0gJHt0aGlzLm5vVGV4dFNlbGVjdH1cXG5gICtcbiAgICAgICAgICAgIGB9YCk7XG4gICAgICAgICAgICAqL1xuICAgIH1cblxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcbiAgICAgICAgZm9yIChjb25zdCBjaGFuZ2UgaW4gY2hhbmdlcykge1xuICAgICAgICAgICAgaWYgKGNoYW5nZXMuaGFzT3duUHJvcGVydHkoY2hhbmdlKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbGxhcHNpYmxlVGFibGVSb3dzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3N0cmlwZWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3RyaXBlZE9kZENvbG9yJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3N0cmlwZWRPZGRUZXh0Q29sb3InOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3RyaXBlZEV2ZW5Db2xvcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzdHJpcGVkRXZlblRleHRDb2xvcic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJsZSgnc3RyaXBlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGlnaGxpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hpZ2hsaWdodENvbG9yJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hpZ2hsaWdodFRleHRDb2xvcic6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJsZSgnaGlnaGxpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdhY3RpdmVDb2xvcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdhY3RpdmVUZXh0Q29sb3InOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGFibGUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2VsZWN0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NlbGVjdENvbG9yJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NlbGVjdFRleHRDb2xvcic6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzZWxlY3RNdWx0aXBsZVJvd3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxsb3dEZXNlbGVjdGluZ1Jvd3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGFibGUoJ3NlbGVjdCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIGNvbGxhcHNpYmxlIHRhYmxlIHR5cGUgaW4gQ29sbGFwc2libGVTZXJ2aWNlXG4gICAgICAgICAgICAgICAgaWYgKGNoYW5nZSA9PT0gJ3R5cGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IGNoYW5nZXMudHlwZS5jdXJyZW50VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2libGVTZXJ2aWNlLnNldFR5cGUodGhpcy50eXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb2xsYXBzaWJsZVNlcnZpY2Uuc2V0Q29sbGFwc2libGVUYWJsZSh0aGlzKTtcbiAgICB9XG5cbiAgICBmb2N1cygpIHtcbiAgICAgICAgdGhpcy5lbC5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgfVxuXG4gICAgYWRkU2VsZWN0ZWRSb3coaW5kZXg6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBzd2l0Y2ggKHRydWUpIHtcbiAgICAgICAgICAgIGNhc2UgdGhpcy5zZWxlY3RNdWx0aXBsZVJvd3MgJiYgdGhpcy5zZWxlY3RlZFJvd3MuaW5kZXhPZihpbmRleCkgPT09IC0xOlxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzLnB1c2goaW5kZXgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgIXRoaXMuc2VsZWN0TXVsdGlwbGVSb3dzOlxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5kZXNlbGVjdEFsbFJvd3MoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93cy5wdXNoKGluZGV4KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93cy5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW1vdmVTZWxlY3RlZFJvdyhpbmRleDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93cy5pbmRleE9mKGluZGV4KSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzLnNwbGljZSh0aGlzLnNlbGVjdGVkUm93cy5pbmRleE9mKGluZGV4KSwgMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbGVhclNlbGVjdGVkUm93cygpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSBbXTtcbiAgICB9XG5cbiAgICBkZXNlbGVjdEFsbFJvd3MoKSB7XG4gICAgICAgIHRoaXMuY29sbGFwc2libGVUYWJsZVJvd3MuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgICAgICAgcm93LnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICByb3cudXBkYXRlUm93KCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNlbGVjdFJvdyhpbmRleDogbnVtYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdCkge1xuICAgICAgICAgICAgc3dpdGNoICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBpbmRleCA9PT0gMDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3coMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgaW5kZXggPT09IHRoaXMuY29sbGFwc2libGVUYWJsZVJvd3MubGVuZ3RoOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdFJvdyh0aGlzLmNvbGxhcHNpYmxlVGFibGVSb3dzLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDAgPCBpbmRleCAmJiBpbmRleCA8PSB0aGlzLmNvbGxhcHNpYmxlVGFibGVSb3dzLmxlbmd0aCAtIDE6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkU2VsZWN0ZWRSb3coaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNpYmxlVGFibGVSb3dzLmZvckVhY2goKHJvdywgaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdE11bHRpcGxlUm93cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3cuc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cudXBkYXRlUm93KCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgc2VsZWN0Um93cyhmaXJzdFJvd0luZGV4OiBudW1iZXIsIGxhc3RSb3dJbmRleDogbnVtYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdE11bHRpcGxlUm93cyAmJlxuICAgICAgICAgICAgMCA8IGZpcnN0Um93SW5kZXggJiYgZmlyc3RSb3dJbmRleCA8IGxhc3RSb3dJbmRleCAmJlxuICAgICAgICAgICAgbGFzdFJvd0luZGV4IDw9IHRoaXMuY29sbGFwc2libGVUYWJsZVJvd3MubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGVkUm93cygpO1xuICAgICAgICAgICAgdGhpcy5jb2xsYXBzaWJsZVRhYmxlUm93cy5mb3JFYWNoKChyb3csIGkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RSb3dJbmRleCA8PSBpICYmIGkgPD0gbGFzdFJvd0luZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkU2VsZWN0ZWRSb3coaSk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcm93LnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJvdy51cGRhdGVSb3coKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdG9nZ2xlUm93U2VsZWN0aW9uKGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ICYmXG4gICAgICAgICAgICAwIDwgaW5kZXggJiYgaW5kZXggPD0gdGhpcy5jb2xsYXBzaWJsZVRhYmxlUm93cy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICB0aGlzLmNvbGxhcHNpYmxlVGFibGVSb3dzLmZvckVhY2goKHJvdywgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gaSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocm93LnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVNlbGVjdGVkUm93KGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkU2VsZWN0ZWRSb3coaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJvdy5zZWxlY3RlZCA9ICFyb3cuc2VsZWN0ZWQ7XG4gICAgICAgICAgICAgICAgICAgIHJvdy51cGRhdGVSb3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qdXBkYXRlRml4ZWRUYWJsZUhlaWdodCgpIHtcbiAgICAgICAgdGhpcy5maXhlZFRhYmxlSGVpZ2h0ID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50Lm9mZnNldEhlaWdodCArICdweCc7XG4gICAgICAgIGxldCBlbGVtOiBFbGVtZW50ID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50O1xuICAgICAgICBsZXQgcm93SGVpZ2h0cyA9IDA7XG4gICAgICAgIGlmICh0aGlzLmNvbGxhcHNpYmxlVGFibGVSb3dDb21wb25lbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5jb2xsYXBzaWJsZVRhYmxlUm93Q29tcG9uZW50LmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSovXG5cbiAgICB1cGRhdGVTdHJpcGVkKHJvdzogQ29sbGFwc2libGVUYWJsZVJvd0NvbXBvbmVudCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5zdHJpcGVkICYmIHJvdy5pc0JvZHlSb3cpIHtcbiAgICAgICAgICAgIHJvdy5pc1BhcmVudFN0cmlwZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHJvdy5pc09kZFJvdykge1xuICAgICAgICAgICAgICAgIHJvdy5wYXJlbnRTdHJpcGVkUm93QmFja2dyb3VuZENvbG9yID0gdGhpcy5zdHJpcGVkT2RkQ29sb3IgfHwgQ29sbGFwc2libGVUYWJsZVJvd0NvbXBvbmVudC5ERUZBVUxUX1NUUklQRURfT0REX1JPV19DT0xPUjtcbiAgICAgICAgICAgICAgICByb3cucGFyZW50U3RyaXBlZFJvd1RleHRDb2xvciA9IHRoaXMuc3RyaXBlZE9kZFRleHRDb2xvciB8fCBDb2xsYXBzaWJsZVRhYmxlUm93Q29tcG9uZW50LkRFRkFVTFRfUk9XX1RFWFRfQ09MT1I7XG4gICAgICAgICAgICAgICAgcm93LnJvd0JhY2tncm91bmRDb2xvciA9IHJvdy5wYXJlbnRTdHJpcGVkUm93QmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgICAgICAgIHJvdy5yb3dUZXh0Q29sb3IgPSByb3cucGFyZW50U3RyaXBlZFJvd1RleHRDb2xvcjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcm93LnBhcmVudFN0cmlwZWRSb3dCYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLnN0cmlwZWRFdmVuQ29sb3IgfHwgQ29sbGFwc2libGVUYWJsZVJvd0NvbXBvbmVudC5ERUZBVUxUX1NUUklQRURfRVZFTl9ST1dfQ09MT1I7XG4gICAgICAgICAgICAgICAgcm93LnBhcmVudFN0cmlwZWRSb3dUZXh0Q29sb3IgPSB0aGlzLnN0cmlwZWRFdmVuVGV4dENvbG9yIHx8IENvbGxhcHNpYmxlVGFibGVSb3dDb21wb25lbnQuREVGQVVMVF9ST1dfVEVYVF9DT0xPUjtcbiAgICAgICAgICAgICAgICByb3cucm93QmFja2dyb3VuZENvbG9yID0gcm93LnBhcmVudFN0cmlwZWRSb3dCYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgICAgICAgICAgcm93LnJvd1RleHRDb2xvciA9IHJvdy5wYXJlbnRTdHJpcGVkUm93VGV4dENvbG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcm93LmlzUGFyZW50U3RyaXBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgcm93LnJvd0JhY2tncm91bmRDb2xvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHJvdy5yb3dUZXh0Q29sb3IgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVIaWdobGlnaHQocm93OiBDb2xsYXBzaWJsZVRhYmxlUm93Q29tcG9uZW50KTogdm9pZCB7XG4gICAgICAgIHJvdy5pc1BhcmVudEhpZ2hsaWdodCA9IHRoaXMuaGlnaGxpZ2h0O1xuICAgICAgICByb3cucGFyZW50SGlnaGxpZ2h0Um93QmFja2dyb3VuZENvbG9yID0gdGhpcy5oaWdobGlnaHRDb2xvciB8fCBDb2xsYXBzaWJsZVRhYmxlUm93Q29tcG9uZW50LkRFRkFVTFRfSElHSExJR0hUX1JPV19DT0xPUjtcbiAgICAgICAgcm93LnBhcmVudEhpZ2hsaWdodFJvd1RleHRDb2xvciA9IHRoaXMuaGlnaGxpZ2h0VGV4dENvbG9yIHx8IENvbGxhcHNpYmxlVGFibGVSb3dDb21wb25lbnQuREVGQVVMVF9ST1dfVEVYVF9DT0xPUjtcbiAgICB9XG5cbiAgICB1cGRhdGVBY3RpdmUocm93OiBDb2xsYXBzaWJsZVRhYmxlUm93Q29tcG9uZW50KTogdm9pZCB7XG4gICAgICAgIHJvdy5hY3RpdmVSb3dCYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmFjdGl2ZUNvbG9yIHx8IENvbGxhcHNpYmxlVGFibGVSb3dDb21wb25lbnQuREVGQVVMVF9BQ1RJVkVfUk9XX0NPTE9SO1xuICAgICAgICByb3cuYWN0aXZlUm93VGV4dENvbG9yID0gdGhpcy5hY3RpdmVUZXh0Q29sb3IgfHwgQ29sbGFwc2libGVUYWJsZVJvd0NvbXBvbmVudC5ERUZBVUxUX1JPV19URVhUX0NPTE9SO1xuICAgIH1cblxuICAgIHVwZGF0ZVNlbGVjdChyb3c6IENvbGxhcHNpYmxlVGFibGVSb3dDb21wb25lbnQpOiB2b2lkIHtcbiAgICAgICAgcm93LnBhcmVudEFsbG93c1NlbGVjdCA9IHRoaXMuc2VsZWN0O1xuICAgICAgICByb3cucGFyZW50QWxsb3dzU2VsZWN0TXVsdGlwbGVSb3dzID0gdGhpcy5zZWxlY3RNdWx0aXBsZVJvd3M7XG4gICAgICAgIHJvdy5wYXJlbnRBbGxvd3NEZXNlbGVjdGluZ1Jvd3MgPSB0aGlzLmFsbG93RGVzZWxlY3RpbmdSb3dzO1xuICAgICAgICBpZiAocm93LnNlbGVjdGVkKSB7XG4gICAgICAgICAgICByb3cuc2VsZWN0ZWRSb3dCYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLnNlbGVjdENvbG9yIHx8IENvbGxhcHNpYmxlVGFibGVSb3dDb21wb25lbnQuREVGQVVMVF9TRUxFQ1RFRF9ST1dfQ09MT1I7XG4gICAgICAgICAgICByb3cuc2VsZWN0ZWRSb3dUZXh0Q29sb3IgPSB0aGlzLnNlbGVjdFRleHRDb2xvciB8fCBDb2xsYXBzaWJsZVRhYmxlUm93Q29tcG9uZW50LkRFRkFVTFRfUk9XX1RFWFRfQ09MT1I7XG4gICAgICAgICAgICByb3cucm93QmFja2dyb3VuZENvbG9yID0gcm93LnNlbGVjdGVkUm93QmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgICAgcm93LnJvd1RleHRDb2xvciA9IHJvdy5zZWxlY3RlZFJvd1RleHRDb2xvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZVRhYmxlKGNoYW5nZT86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5jb2xsYXBzaWJsZVRhYmxlUm93cyAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY2hhbmdlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNoYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzdHJpcGVkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByb3BhZ2F0ZSBjaGFuZ2VzIHRvIGVhY2ggb2YgdGhlIENvbGxhcHNpYmxlVGFibGVSb3dDb21wb25lbnQgY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2libGVUYWJsZVJvd3MuZm9yRWFjaChyb3cgPT4geyB0aGlzLnVwZGF0ZVN0cmlwZWQocm93KTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGlnaGxpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2libGVUYWJsZVJvd3MuZm9yRWFjaChyb3cgPT4geyB0aGlzLnVwZGF0ZUhpZ2hsaWdodChyb3cpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhY3RpdmUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzaWJsZVRhYmxlUm93cy5mb3JFYWNoKHJvdyA9PiB7IHRoaXMudXBkYXRlQWN0aXZlKHJvdyk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NlbGVjdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNpYmxlVGFibGVSb3dzLmZvckVhY2gocm93ID0+IHsgdGhpcy51cGRhdGVTZWxlY3Qocm93KTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHByb3BhZ2F0ZSBjaGFuZ2VzIHRvIGVhY2ggb2YgdGhlIENvbGxhcHNpYmxlVGFibGVSb3dDb21wb25lbnQgY2hpbGRyZW5cbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNpYmxlVGFibGVSb3dzLmZvckVhY2gocm93ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdHJpcGVkKHJvdyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSGlnaGxpZ2h0KHJvdyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2VsZWN0KHJvdyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQWN0aXZlKHJvdyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBASG9zdExpc3RlbmVyKCdrZXlkb3duJywgWyckZXZlbnQnXSlcbiAgICBrZXlkb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgICAgIC8vIHNlbGVjdCBhIHJvdyBvbmx5IGlmICdzZWxlY3QnIHByb3BlcnR5IGlzIHNldCB0byAndHJ1ZSdcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ICYmIHRoaXMuYWxsb3dLZXlib2FyZE5hdmlnYXRpb24pIHtcbiAgICAgICAgICAgIGVudW0gS2V5IHtcbiAgICAgICAgICAgICAgICBhcnJvd1VwID0gMzgsXG4gICAgICAgICAgICAgICAgYXJyb3dEb3duID0gNDAsXG4gICAgICAgICAgICAgICAgaG9tZSA9IDM2LFxuICAgICAgICAgICAgICAgIGVuZCA9IDM1XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBpbmRleCA9IDE7XG4gICAgICAgICAgICBjb25zdCB3aGljaEtleSA9IGV2ZW50Wyd3aGljaCddO1xuICAgICAgICAgICAgaWYgKEtleVt3aGljaEtleV0gIT0gbnVsbCkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgICAgIHN3aXRjaCAod2hpY2hLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBLZXkuYXJyb3dVcDpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbGVjdCBwcmV2aW91cyByb3dcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLnNlbGVjdGVkUm93c1t0aGlzLnNlbGVjdGVkUm93cy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgS2V5LmFycm93RG93bjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbGVjdCBuZXh0IHJvd1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3dzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuc2VsZWN0ZWRSb3dzW3RoaXMuc2VsZWN0ZWRSb3dzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBLZXkuaG9tZTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIEtleS5lbmQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuY29sbGFwc2libGVUYWJsZVJvd3MubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJTZWxlY3RlZFJvd3MoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc2VsZWN0QWxsUm93cygpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Um93KGluZGV4KTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRhYmxlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBASG9zdExpc3RlbmVyKCdtb3VzZWRvd24nKVxuICAgIG1vdXNlZG93bigpIHtcbiAgICAgICAgdGhpcy5tb3VzZURvd25Ib2xkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBASG9zdExpc3RlbmVyKCdtb3VzZXVwJylcbiAgICBtb3VzZXVwKCkge1xuICAgICAgICB0aGlzLm1vdXNlRG93bkhvbGQgPSBmYWxzZTtcbiAgICB9XG59XG4iXX0=